{{- $labels := .Values.labels | default dict -}}
{{- range $i, $ns := .Values.namespaces -}}
{{- if gt $i 0 }}
---
{{- end }}
apiVersion: v1
kind: Namespace
metadata:
  name: {{ $ns | quote }}
  annotations:
    # Prevent accidental early namespace deletion (e.g. if this release is destroyed out of order).
    # Cluster teardown is handled explicitly by scripts/99_teardown.sh.
    "helm.sh/resource-policy": keep
  labels:
{{- range $k, $v := $labels }}
    {{ $k }}: {{ $v | quote }}
{{- end }}
{{- end -}}
