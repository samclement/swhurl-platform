# Base configuration for local platform scripts

# Cluster
CLUSTER_NAME=platform
# Default to k3s for Linux simplicity. Set to 'kind' to use kind.
K8S_PROVIDER=k3s

# kind-only settings (ignored for k3s)
KIND_EXPERIMENTAL_PROVIDER=podman
KIND_NODES=1
KIND_CONFIG=values/kind-config-single.yaml

# Domain / TLS
# Register these subdomains in Route53 (or use a wildcard A record)
SWHURL_SUBDOMAINS="homelab oauth.homelab hello.homelab grafana.homelab minio.homelab minio-console.homelab"
SWHURL_SUBDOMAIN=
BASE_DOMAIN=homelab.swhurl.com
CLUSTER_ISSUER=letsencrypt  # selfsigned | letsencrypt
# Put ACME_EMAIL in a secrets profile instead of committing it
ACME_EMAIL=

# OAuth2 Proxy (optional) â€” move secrets to profiles/secrets.env
OIDC_ISSUER=
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OAUTH_COOKIE_SECRET=
OAUTH_HOST=oauth.${BASE_DOMAIN}

# Observability
GRAFANA_HOST=grafana.${BASE_DOMAIN}

# Storage
MINIO_HOST=minio.${BASE_DOMAIN}
MINIO_CONSOLE_HOST=minio-console.${BASE_DOMAIN}
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=

# Feature flags
FEAT_DNS_REGISTER=true
FEAT_OAUTH2_PROXY=true
FEAT_LOGGING=true
FEAT_LOKI=true
FEAT_OBS=true
FEAT_MINIO=true
FEAT_MESH_LINKERD=false
FEAT_MESH_ISTIO=false

# Runtime
TIMEOUT_SECS=300

# Kind sysctl tuning
# On Linux with rootless Podman, tuning inotify inside kind nodes is blocked.
# Set to false to skip the step cleanly.
KIND_TUNE_INOTIFY=false
