# Base configuration for local platform scripts

# Domain / TLS
# Dynamic DNS host task updates wildcard Route53 record `*.homelab.swhurl.com`.
# Note: this wildcard does not match multi-label hosts such as `api.staging.homelab.swhurl.com`.
BASE_DOMAIN=homelab.swhurl.com
# Platform cert issuer mode is Git-managed in:
# - clusters/home/flux-system/sources/configmap-platform-settings.yaml (`CERT_ISSUER`)
# App URL/issuer mode is path-selected in:
# - clusters/home/tenants.yaml -> tenants/overlays/app-*-le-*

# OAuth2 Proxy (optional) â€” move secrets to profiles/secrets.env
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
# Required when FEAT_OAUTH2_PROXY=true (must be exactly 16, 24, or 32 bytes/chars).
OAUTH_COOKIE_SECRET=
OAUTH_HOST=oauth.${BASE_DOMAIN}

# Observability
HUBBLE_HOST=hubble.${BASE_DOMAIN}
CLICKSTACK_HOST=clickstack.${BASE_DOMAIN}
# Single ClickStack key: used for ClickStack chart apiKey and OTel exporter authorization.
CLICKSTACK_API_KEY=

# Storage
MINIO_HOST=minio.${BASE_DOMAIN}
MINIO_CONSOLE_HOST=minio-console.${BASE_DOMAIN}
MINIO_ROOT_PASSWORD=

# Provider intent hints (verification + pre-Flux bootstrap behavior).
# Active provider resources are selected declaratively in:
# infrastructure/overlays/home/kustomization.yaml
INGRESS_PROVIDER=nginx
OBJECT_STORAGE_PROVIDER=minio

# Host bootstrap
# k3s installation is intentionally not part of the platform orchestrator.
# Use host/run-host.sh --only 20_install_k3s.sh for local host install.

# Skip verification scripts in apply runs (useful for quick iteration).
FEAT_VERIFY=true

FEAT_OAUTH2_PROXY=true
FEAT_CILIUM=true
FEAT_CLICKSTACK=true
FEAT_OTEL_K8S=true
FEAT_MINIO=true
## Service mesh
# Linkerd/Istio scripts were removed to keep the platform focused and reduce maintenance.

# Runtime
TIMEOUT_SECS=300
