# Base configuration for local platform scripts

# Domain / TLS
# Register these subdomains in Route53 (or use a wildcard A record)
SWHURL_SUBDOMAINS="homelab oauth.homelab hello.homelab clickstack.homelab hubble.homelab minio.homelab minio-console.homelab"
SWHURL_SUBDOMAIN=
BASE_DOMAIN=homelab.swhurl.com
CLUSTER_ISSUER=letsencrypt  # selfsigned | letsencrypt
LETSENCRYPT_ENV=staging     # staging | prod
# Put ACME_EMAIL in a secrets profile instead of committing it
ACME_EMAIL=

# OAuth2 Proxy (optional) â€” move secrets to profiles/secrets.env
OIDC_ISSUER=
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OAUTH_COOKIE_SECRET=
OAUTH_HOST=oauth.${BASE_DOMAIN}

# Observability
HUBBLE_HOST=hubble.${BASE_DOMAIN}
CLICKSTACK_HOST=clickstack.${BASE_DOMAIN}
CLICKSTACK_API_KEY=
CLICKSTACK_INGESTION_KEY=
CLICKSTACK_OTEL_ENDPOINT=http://clickstack-otel-collector.observability.svc.cluster.local:4318

# Storage
MINIO_HOST=minio.${BASE_DOMAIN}
MINIO_CONSOLE_HOST=minio-console.${BASE_DOMAIN}
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=

# Host bootstrap
# k3s installation is intentionally not part of the platform orchestrator.
# Use scripts/manual_install_k3s_minimal.sh for local host install.

# Skip verification scripts in apply runs (useful for quick iteration).
FEAT_VERIFY=true
# Extra verification/diagnostics (smoke/inventory/context/surface) are opt-in.
FEAT_VERIFY_DEEP=false

FEAT_OAUTH2_PROXY=true
FEAT_CILIUM=true
FEAT_CLICKSTACK=true
FEAT_OTEL_K8S=true
FEAT_MINIO=true
## Service mesh
# Linkerd/Istio scripts were removed to keep the platform focused and reduce maintenance.

# Runtime
TIMEOUT_SECS=300
HELMFILE_ENV=default

# Optional orchestration: include host layer when running ./run.sh
# (host tasks run before apply, and after delete).
RUN_HOST_LAYER=false
